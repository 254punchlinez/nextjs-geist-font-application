{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/hooks/useSocket.ts"],"sourcesContent":["'use client'\n\nimport { useEffect, useState, useRef } from 'react'\nimport { io, Socket } from 'socket.io-client'\n\nconst SOCKET_SERVER_URL = process.env.NEXT_PUBLIC_SOCKET_SERVER_URL || 'http://localhost:4000'\n\nexport const useSocket = () => {\n  const [socket, setSocket] = useState<Socket | null>(null)\n  const [isConnected, setIsConnected] = useState(false)\n  const [connectionError, setConnectionError] = useState<string | null>(null)\n  const reconnectAttempts = useRef(0)\n  const maxReconnectAttempts = 5\n\n  useEffect(() => {\n    const socketInstance = io(SOCKET_SERVER_URL, {\n      reconnectionAttempts: maxReconnectAttempts,\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 5000,\n      timeout: 20000,\n    })\n\n    // Connection event handlers\n    socketInstance.on('connect', () => {\n      console.log('Connected to server:', socketInstance.id)\n      setIsConnected(true)\n      setConnectionError(null)\n      reconnectAttempts.current = 0\n    })\n\n    socketInstance.on('disconnect', (reason: string) => {\n      console.log('Disconnected from server:', reason)\n      setIsConnected(false)\n      \n      if (reason === 'io server disconnect') {\n        // Server disconnected the socket, need to reconnect manually\n        socketInstance.connect()\n      }\n    })\n\n    socketInstance.on('connect_error', (error: Error) => {\n      console.error('Connection error:', error)\n      reconnectAttempts.current++\n      \n      if (reconnectAttempts.current >= maxReconnectAttempts) {\n        setConnectionError('Failed to connect to server. Please check your connection and try again.')\n      } else {\n        setConnectionError(`Connection attempt ${reconnectAttempts.current}/${maxReconnectAttempts}...`)\n      }\n    })\n\n    socketInstance.on('reconnect', (attemptNumber: number) => {\n      console.log('Reconnected after', attemptNumber, 'attempts')\n      setIsConnected(true)\n      setConnectionError(null)\n    })\n\n    socketInstance.on('reconnect_error', (error: Error) => {\n      console.error('Reconnection error:', error)\n    })\n\n    socketInstance.on('reconnect_failed', () => {\n      console.error('Failed to reconnect after maximum attempts')\n      setConnectionError('Unable to reconnect to server. Please refresh the page.')\n    })\n\n    setSocket(socketInstance)\n\n    // Cleanup on unmount\n    return () => {\n      socketInstance.disconnect()\n    }\n  }, [])\n\n  const reconnect = () => {\n    if (socket) {\n      reconnectAttempts.current = 0\n      setConnectionError(null)\n      socket.connect()\n    }\n  }\n\n  return {\n    socket,\n    isConnected,\n    connectionError,\n    reconnect\n  }\n}\n\nexport default useSocket\n"],"names":[],"mappings":";;;;AAK0B;AAH1B;AACA;AAAA;;AAHA;;;AAKA,MAAM,oBAAoB,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,6BAA6B,IAAI;AAEhE,MAAM,YAAY;;IACvB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IACpD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IACtE,MAAM,oBAAoB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IACjC,MAAM,uBAAuB;IAE7B,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,MAAM,iBAAiB,CAAA,GAAA,kLAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;gBAC3C,sBAAsB;gBACtB,mBAAmB;gBACnB,sBAAsB;gBACtB,SAAS;YACX;YAEA,4BAA4B;YAC5B,eAAe,EAAE,CAAC;uCAAW;oBAC3B,QAAQ,GAAG,CAAC,wBAAwB,eAAe,EAAE;oBACrD,eAAe;oBACf,mBAAmB;oBACnB,kBAAkB,OAAO,GAAG;gBAC9B;;YAEA,eAAe,EAAE,CAAC;uCAAc,CAAC;oBAC/B,QAAQ,GAAG,CAAC,6BAA6B;oBACzC,eAAe;oBAEf,IAAI,WAAW,wBAAwB;wBACrC,6DAA6D;wBAC7D,eAAe,OAAO;oBACxB;gBACF;;YAEA,eAAe,EAAE,CAAC;uCAAiB,CAAC;oBAClC,QAAQ,KAAK,CAAC,qBAAqB;oBACnC,kBAAkB,OAAO;oBAEzB,IAAI,kBAAkB,OAAO,IAAI,sBAAsB;wBACrD,mBAAmB;oBACrB,OAAO;wBACL,mBAAmB,CAAC,mBAAmB,EAAE,kBAAkB,OAAO,CAAC,CAAC,EAAE,qBAAqB,GAAG,CAAC;oBACjG;gBACF;;YAEA,eAAe,EAAE,CAAC;uCAAa,CAAC;oBAC9B,QAAQ,GAAG,CAAC,qBAAqB,eAAe;oBAChD,eAAe;oBACf,mBAAmB;gBACrB;;YAEA,eAAe,EAAE,CAAC;uCAAmB,CAAC;oBACpC,QAAQ,KAAK,CAAC,uBAAuB;gBACvC;;YAEA,eAAe,EAAE,CAAC;uCAAoB;oBACpC,QAAQ,KAAK,CAAC;oBACd,mBAAmB;gBACrB;;YAEA,UAAU;YAEV,qBAAqB;YACrB;uCAAO;oBACL,eAAe,UAAU;gBAC3B;;QACF;8BAAG,EAAE;IAEL,MAAM,YAAY;QAChB,IAAI,QAAQ;YACV,kBAAkB,OAAO,GAAG;YAC5B,mBAAmB;YACnB,OAAO,OAAO;QAChB;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;IACF;AACF;GAjFa;uCAmFE","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Chat/MessageItem.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\n\ninterface Message {\n  id: string\n  username: string\n  text: string\n  timestamp: string\n  room: string\n  reactions?: { [key: string]: string[] }\n  readBy?: string[]\n  type?: 'file' | 'image' | 'text'\n  fileUrl?: string\n  fileName?: string\n}\n\ninterface MessageItemProps {\n  message: Message\n  isOwnMessage: boolean\n  onReaction: (messageId: string, reaction: string) => void\n}\n\nconst REACTIONS = ['üëç', '‚ù§Ô∏è', 'üòÇ', 'üòÆ', 'üò¢', 'üò°']\n\nexport default function MessageItem({ message, isOwnMessage, onReaction }: MessageItemProps) {\n  const [showReactions, setShowReactions] = useState(false)\n\n  const formatTime = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString([], { \n      hour: '2-digit', \n      minute: '2-digit' \n    })\n  }\n\n  const handleReactionClick = (reaction: string) => {\n    onReaction(message.id, reaction)\n    setShowReactions(false)\n  }\n\n  const getTotalReactions = () => {\n    if (!message.reactions) return 0\n    return Object.values(message.reactions).reduce((total, users) => total + users.length, 0)\n  }\n\n  const renderFileContent = () => {\n    if (message.type === 'file' && message.fileUrl) {\n      return (\n        <div className=\"mt-2 p-3 bg-gray-50 rounded-lg border\">\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-2xl\">üìé</span>\n            <div>\n              <p className=\"font-medium text-sm\">{message.fileName}</p>\n              <a \n                href={message.fileUrl} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:text-blue-800 text-sm underline\"\n              >\n                Download\n              </a>\n            </div>\n          </div>\n        </div>\n      )\n    }\n\n    if (message.type === 'image' && message.fileUrl) {\n      return (\n        <div className=\"mt-2\">\n          <img \n            src={message.fileUrl} \n            alt={message.fileName || 'Shared image'}\n            className=\"max-w-xs max-h-64 rounded-lg border\"\n            loading=\"lazy\"\n          />\n        </div>\n      )\n    }\n\n    return null\n  }\n\n  return (\n    <div className={`flex ${isOwnMessage ? 'justify-end' : 'justify-start'}`}>\n      <div className={`max-w-xs lg:max-w-md ${isOwnMessage ? 'order-2' : 'order-1'}`}>\n        <div\n          className={`relative group px-4 py-2 rounded-2xl ${\n            isOwnMessage\n              ? 'bg-blue-600 text-white'\n              : 'bg-white text-gray-900 border border-gray-200'\n          }`}\n        >\n          {/* Username (only show for others' messages) */}\n          {!isOwnMessage && (\n            <p className=\"text-xs font-medium text-gray-600 mb-1\">\n              {message.username}\n            </p>\n          )}\n\n          {/* Message Text */}\n          <p className=\"text-sm whitespace-pre-wrap break-words\">\n            {message.text}\n          </p>\n\n          {/* File Content */}\n          {renderFileContent()}\n\n          {/* Timestamp */}\n          <p className={`text-xs mt-1 ${\n            isOwnMessage ? 'text-blue-100' : 'text-gray-500'\n          }`}>\n            {formatTime(message.timestamp)}\n          </p>\n\n          {/* Reaction Button */}\n          <button\n            onClick={() => setShowReactions(!showReactions)}\n            className={`absolute -bottom-2 ${isOwnMessage ? 'left-2' : 'right-2'} \n              opacity-0 group-hover:opacity-100 transition-opacity\n              w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 \n              flex items-center justify-center text-xs`}\n          >\n            +\n          </button>\n\n          {/* Reaction Picker */}\n          {showReactions && (\n            <div className={`absolute top-full mt-2 ${isOwnMessage ? 'right-0' : 'left-0'} \n              bg-white border border-gray-200 rounded-lg shadow-lg p-2 flex space-x-1 z-10`}>\n              {REACTIONS.map((reaction) => (\n                <button\n                  key={reaction}\n                  onClick={() => handleReactionClick(reaction)}\n                  className=\"w-8 h-8 rounded hover:bg-gray-100 flex items-center justify-center text-lg\"\n                >\n                  {reaction}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Reactions Display */}\n        {message.reactions && getTotalReactions() > 0 && (\n          <div className={`flex flex-wrap gap-1 mt-1 ${isOwnMessage ? 'justify-end' : 'justify-start'}`}>\n            {Object.entries(message.reactions).map(([reaction, users]) => \n              users.length > 0 && (\n                <span\n                  key={reaction}\n                  className=\"inline-flex items-center px-2 py-1 rounded-full bg-gray-100 text-xs\"\n                  title={`${users.join(', ')} reacted with ${reaction}`}\n                >\n                  {reaction} {users.length}\n                </span>\n              )\n            )}\n          </div>\n        )}\n\n        {/* Read Receipt */}\n        {isOwnMessage && message.readBy && message.readBy.length > 1 && (\n          <p className=\"text-xs text-gray-500 mt-1 text-right\">\n            Read by {message.readBy.length - 1} user{message.readBy.length - 1 !== 1 ? 's' : ''}\n          </p>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Chat/MessageList.tsx"],"sourcesContent":["'use client'\n\nimport MessageItem from './MessageItem'\n\ninterface Message {\n  id: string\n  username: string\n  text: string\n  timestamp: string\n  room: string\n  reactions?: { [key: string]: string[] }\n  readBy?: string[]\n  type?: 'file' | 'image' | 'text'\n  fileUrl?: string\n  fileName?: string\n}\n\ninterface MessageListProps {\n  messages: Message[]\n  currentUser: string\n  onReaction: (messageId: string, reaction: string) => void\n}\n\nexport default function MessageList({ messages, currentUser, onReaction }: MessageListProps) {\n  if (messages.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-32 text-gray-500\">\n        <div className=\"text-center\">\n          <p className=\"text-lg mb-2\">üëã</p>\n          <p>No messages yet. Start the conversation!</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {messages.map((message) => (\n        <MessageItem\n          key={message.id}\n          message={message}\n          isOwnMessage={message.username === currentUser}\n          onReaction={onReaction}\n        />\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAuBe,SAAS,YAAY,EAAE,QAAQ,EAAE,WAAW,EAAE,UAAU,EAAoB;IACzF,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAe;;;;;;kCAC5B,6LAAC;kCAAE;;;;;;;;;;;;;;;;;IAIX;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC,wBACb,6LAAC,4IAAA,CAAA,UAAW;gBAEV,SAAS;gBACT,cAAc,QAAQ,QAAQ,KAAK;gBACnC,YAAY;eAHP,QAAQ,EAAE;;;;;;;;;;AAQzB;KAxBwB","debugId":null}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Chat/ChatInput.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Socket } from 'socket.io-client'\n\ninterface ChatInputProps {\n  socket: Socket\n  currentRoom: string\n}\n\nexport default function ChatInput({ socket, currentRoom }: ChatInputProps) {\n  const [message, setMessage] = useState('')\n  const [isTyping, setIsTyping] = useState(false)\n  const [isUploading, setIsUploading] = useState(false)\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const textareaRef = useRef<HTMLTextAreaElement>(null)\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null)\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto'\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`\n    }\n  }, [message])\n\n  // Handle typing indicators\n  useEffect(() => {\n    if (message.trim() && !isTyping) {\n      setIsTyping(true)\n      socket?.emit('typing', { isTyping: true })\n    }\n\n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current)\n    }\n\n    // Set new timeout to stop typing indicator\n    typingTimeoutRef.current = setTimeout(() => {\n      if (isTyping) {\n        setIsTyping(false)\n        socket?.emit('typing', { isTyping: false })\n      }\n    }, 1000)\n\n    return () => {\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current)\n      }\n    }\n  }, [message, socket, isTyping])\n\n  const handleSendMessage = () => {\n    if (!message.trim() || !socket) return\n\n    socket.emit('message', { text: message.trim() }, (response: any) => {\n      if (response?.status === 'ok') {\n        setMessage('')\n        setIsTyping(false)\n        socket.emit('typing', { isTyping: false })\n      } else {\n        console.error('Failed to send message:', response?.error)\n      }\n    })\n  }\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault()\n      handleSendMessage()\n    }\n  }\n\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file || !socket) return\n\n    setIsUploading(true)\n\n    try {\n      const formData = new FormData()\n      formData.append('file', file)\n\n      const response = await fetch('http://localhost:4000/upload', {\n        method: 'POST',\n        body: formData,\n      })\n\n      if (response.ok) {\n        const result = await response.json()\n        \n        // Send file message\n        const fileMessage = {\n          text: `Shared a file: ${result.originalName}`,\n          type: file.type.startsWith('image/') ? 'image' : 'file',\n          fileUrl: result.url,\n          fileName: result.originalName\n        }\n\n        socket.emit('message', fileMessage, (response: any) => {\n          if (response?.status !== 'ok') {\n            console.error('Failed to send file message:', response?.error)\n          }\n        })\n      } else {\n        console.error('File upload failed')\n      }\n    } catch (error) {\n      console.error('Error uploading file:', error)\n    } finally {\n      setIsUploading(false)\n      if (fileInputRef.current) {\n        fileInputRef.current.value = ''\n      }\n    }\n  }\n\n  return (\n    <div className=\"flex items-end space-x-2\">\n      {/* File Upload Button */}\n      <button\n        onClick={() => fileInputRef.current?.click()}\n        disabled={isUploading}\n        className=\"flex-shrink-0 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\"\n        title=\"Upload file\"\n      >\n        {isUploading ? (\n          <div className=\"w-5 h-5 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin\"></div>\n        ) : (\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n          </svg>\n        )}\n      </button>\n\n      {/* Hidden File Input */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        onChange={handleFileUpload}\n        className=\"hidden\"\n        accept=\"image/*,.pdf,.doc,.docx,.txt,.zip,.rar\"\n      />\n\n      {/* Message Input */}\n      <div className=\"flex-1 relative\">\n        <textarea\n          ref={textareaRef}\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          onKeyPress={handleKeyPress}\n          placeholder=\"Type your message... (Press Enter to send, Shift+Enter for new line)\"\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none min-h-[40px] max-h-32\"\n          rows={1}\n        />\n      </div>\n\n      {/* Send Button */}\n      <button\n        onClick={handleSendMessage}\n        disabled={!message.trim()}\n        className=\"flex-shrink-0 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n      >\n        Send\n      </button>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 647, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Chat/UserList.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\n\ninterface User {\n  id: string\n  username: string\n  room: string\n  joinedAt: string\n}\n\ninterface UserListProps {\n  users: User[]\n  currentUser: string\n  onSendPrivateMessage: (user: User, message: string) => void\n}\n\nexport default function UserList({ users, currentUser, onSendPrivateMessage }: UserListProps) {\n  const [selectedUser, setSelectedUser] = useState<User | null>(null)\n  const [privateMessage, setPrivateMessage] = useState('')\n  const [showPrivateInput, setShowPrivateInput] = useState(false)\n\n  const handleSendPrivateMessage = () => {\n    if (selectedUser && privateMessage.trim()) {\n      onSendPrivateMessage(selectedUser, privateMessage.trim())\n      setPrivateMessage('')\n      setShowPrivateInput(false)\n      setSelectedUser(null)\n    }\n  }\n\n  const handleUserClick = (user: User) => {\n    if (user.username === currentUser) return\n    \n    setSelectedUser(user)\n    setShowPrivateInput(true)\n  }\n\n  const formatJoinTime = (timestamp: string) => {\n    const date = new Date(timestamp)\n    const now = new Date()\n    const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60))\n    \n    if (diffInMinutes < 1) return 'Just joined'\n    if (diffInMinutes < 60) return `${diffInMinutes}m ago`\n    if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`\n    return date.toLocaleDateString()\n  }\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-gray-200\">\n        <h3 className=\"font-semibold text-gray-900\">Online Users</h3>\n        <p className=\"text-sm text-gray-500\">{users.length} user{users.length !== 1 ? 's' : ''}</p>\n      </div>\n\n      {/* User List */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {users.length === 0 ? (\n          <div className=\"p-4 text-center text-gray-500\">\n            <p>No users online</p>\n          </div>\n        ) : (\n          <div className=\"p-2 space-y-1\">\n            {users.map((user) => (\n              <div\n                key={user.id}\n                onClick={() => handleUserClick(user)}\n                className={`p-3 rounded-lg transition-colors cursor-pointer ${\n                  user.username === currentUser\n                    ? 'bg-blue-50 border border-blue-200'\n                    : 'hover:bg-gray-50'\n                }`}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                    <span className={`font-medium ${\n                      user.username === currentUser ? 'text-blue-700' : 'text-gray-900'\n                    }`}>\n                      {user.username}\n                      {user.username === currentUser && ' (You)'}\n                    </span>\n                  </div>\n                </div>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  {formatJoinTime(user.joinedAt)}\n                </p>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Private Message Input */}\n      {showPrivateInput && selectedUser && (\n        <div className=\"border-t border-gray-200 p-4 bg-gray-50\">\n          <div className=\"mb-2\">\n            <p className=\"text-sm font-medium text-gray-700\">\n              Send private message to {selectedUser.username}\n            </p>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <textarea\n              value={privateMessage}\n              onChange={(e) => setPrivateMessage(e.target.value)}\n              placeholder=\"Type your private message...\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none\"\n              rows={2}\n            />\n            \n            <div className=\"flex space-x-2\">\n              <button\n                onClick={handleSendPrivateMessage}\n                disabled={!privateMessage.trim()}\n                className=\"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                Send\n              </button>\n              <button\n                onClick={() => {\n                  setShowPrivateInput(false)\n                  setSelectedUser(null)\n                  setPrivateMessage('')\n                }}\n                className=\"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-400 transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Instructions */}\n      <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n        <p className=\"text-xs text-gray-500 text-center\">\n          Click on a user to send a private message\n        </p>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 908, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Chat/ChatWindow.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState, useRef } from 'react'\nimport { Socket } from 'socket.io-client'\nimport MessageList from './MessageList'\nimport ChatInput from './ChatInput'\nimport UserList from './UserList'\n\ninterface Message {\n  id: string\n  username: string\n  text: string\n  timestamp: string\n  room: string\n  reactions?: { [key: string]: string[] }\n  readBy?: string[]\n  type?: 'file' | 'image' | 'text'\n  fileUrl?: string\n  fileName?: string\n}\n\ninterface PrivateMessage {\n  id: string\n  from: string\n  fromId: string\n  to: string\n  toId: string\n  text: string\n  timestamp: string\n  type: 'private'\n}\n\ninterface User {\n  id: string\n  username: string\n  room: string\n  joinedAt: string\n}\n\ninterface ChatWindowProps {\n  username: string\n  socket: Socket\n  onLeaveChat: () => void\n}\n\nexport default function ChatWindow({ username, socket, onLeaveChat }: ChatWindowProps) {\n  const [messages, setMessages] = useState<Message[]>([])\n  const [privateMessages, setPrivateMessages] = useState<PrivateMessage[]>([])\n  const [onlineUsers, setOnlineUsers] = useState<User[]>([])\n  const [currentRoom, setCurrentRoom] = useState('global')\n  const [currentRoomName, setCurrentRoomName] = useState('Global Chat')\n  const [typingUsers, setTypingUsers] = useState<string[]>([])\n  const [notifications, setNotifications] = useState<string[]>([])\n  const [unreadCount, setUnreadCount] = useState(0)\n  const [showUserList, setShowUserList] = useState(false)\n  const [isWindowFocused, setIsWindowFocused] = useState(true)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  // Auto-scroll to bottom when new messages arrive\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  // Handle window focus for unread count\n  useEffect(() => {\n    const handleFocus = () => {\n      setIsWindowFocused(true)\n      setUnreadCount(0)\n    }\n    const handleBlur = () => setIsWindowFocused(false)\n\n    window.addEventListener('focus', handleFocus)\n    window.addEventListener('blur', handleBlur)\n\n    return () => {\n      window.removeEventListener('focus', handleFocus)\n      window.removeEventListener('blur', handleBlur)\n    }\n  }, [])\n\n  // Socket event listeners\n  useEffect(() => {\n    if (!socket) return\n\n    // Handle incoming messages\n    socket.on('message', (message: Message) => {\n      setMessages(prev => [...prev, message])\n      \n      // Show notification if window is not focused\n      if (!isWindowFocused && message.username !== username) {\n        setUnreadCount(prev => prev + 1)\n        \n        // Browser notification\n        if (Notification.permission === 'granted') {\n          new Notification(`New message from ${message.username}`, {\n            body: message.text,\n            icon: '/favicon.ico'\n          })\n        }\n      }\n    })\n\n    // Handle previous messages when joining\n    socket.on('previous-messages', (messages: Message[]) => {\n      setMessages(messages)\n    })\n\n    // Handle user joined\n    socket.on('user-joined', (data: { user: User; message: string; onlineUsers: User[] }) => {\n      setOnlineUsers(data.onlineUsers)\n      setNotifications(prev => [...prev, data.message])\n      setTimeout(() => {\n        setNotifications(prev => prev.slice(1))\n      }, 3000)\n    })\n\n    // Handle user left\n    socket.on('user-left', (data: { username: string; message: string; onlineUsers: User[] }) => {\n      setOnlineUsers(data.onlineUsers)\n      setNotifications(prev => [...prev, data.message])\n      setTimeout(() => {\n        setNotifications(prev => prev.slice(1))\n      }, 3000)\n    })\n\n    // Handle online users\n    socket.on('online-users', (users: User[]) => {\n      setOnlineUsers(users)\n    })\n\n    // Handle typing indicators\n    socket.on('typing', (data: { username: string; isTyping: boolean }) => {\n      if (data.isTyping) {\n        setTypingUsers(prev => [...prev.filter(u => u !== data.username), data.username])\n      } else {\n        setTypingUsers(prev => prev.filter(u => u !== data.username))\n      }\n    })\n\n    // Handle private messages\n    socket.on('private-message', (message: PrivateMessage) => {\n      setPrivateMessages(prev => [...prev, message])\n      \n      if (!isWindowFocused && message.from !== username) {\n        setUnreadCount(prev => prev + 1)\n        \n        if (Notification.permission === 'granted') {\n          new Notification(`Private message from ${message.from}`, {\n            body: message.text,\n            icon: '/favicon.ico'\n          })\n        }\n      }\n    })\n\n    // Handle message reactions\n    socket.on('message-reaction', (data: { messageId: string; reactions: { [key: string]: string[] } }) => {\n      setMessages(prev => prev.map(msg => \n        msg.id === data.messageId \n          ? { ...msg, reactions: data.reactions }\n          : msg\n      ))\n    })\n\n    return () => {\n      socket.off('message')\n      socket.off('previous-messages')\n      socket.off('user-joined')\n      socket.off('user-left')\n      socket.off('online-users')\n      socket.off('typing')\n      socket.off('private-message')\n      socket.off('message-reaction')\n    }\n  }, [socket, username, isWindowFocused])\n\n  // Request notification permission\n  useEffect(() => {\n    if (Notification.permission === 'default') {\n      Notification.requestPermission()\n    }\n  }, [])\n\n  const handleReaction = (messageId: string, reaction: string) => {\n    socket?.emit('react-message', { messageId, reaction, room: currentRoom })\n  }\n\n  const handleSendPrivateMessage = (targetUser: User, message: string) => {\n    socket?.emit('private-message', {\n      to: targetUser.username,\n      toId: targetUser.id,\n      text: message\n    })\n  }\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      {/* Main Chat Area */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Header */}\n        <header className=\"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <h1 className=\"text-xl font-semibold text-gray-900\">{currentRoomName}</h1>\n            <span className=\"text-sm text-gray-500\">\n              {onlineUsers.length} user{onlineUsers.length !== 1 ? 's' : ''} online\n            </span>\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => setShowUserList(!showUserList)}\n              className=\"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors\"\n            >\n              Users ({onlineUsers.length})\n            </button>\n            <button\n              onClick={onLeaveChat}\n              className=\"px-3 py-1 text-sm bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors\"\n            >\n              Leave Chat\n            </button>\n          </div>\n        </header>\n\n        {/* Notifications */}\n        {notifications.length > 0 && (\n          <div className=\"bg-blue-50 border-b border-blue-200 px-4 py-2\">\n            {notifications.map((notification, index) => (\n              <p key={index} className=\"text-sm text-blue-700\">\n                {notification}\n              </p>\n            ))}\n          </div>\n        )}\n\n        {/* Messages Area */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n          <MessageList \n            messages={messages} \n            currentUser={username}\n            onReaction={handleReaction}\n          />\n          \n          {/* Typing Indicators */}\n          {typingUsers.length > 0 && (\n            <div className=\"flex items-center space-x-2 text-sm text-gray-500 italic\">\n              <div className=\"flex space-x-1\">\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n              </div>\n              <span>\n                {typingUsers.length === 1 \n                  ? `${typingUsers[0]} is typing...`\n                  : `${typingUsers.slice(0, -1).join(', ')} and ${typingUsers[typingUsers.length - 1]} are typing...`\n                }\n              </span>\n            </div>\n          )}\n          \n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Chat Input */}\n        <div className=\"border-t border-gray-200 bg-white p-4\">\n          <ChatInput socket={socket} currentRoom={currentRoom} />\n        </div>\n      </div>\n\n      {/* User List Sidebar */}\n      {showUserList && (\n        <div className=\"w-64 bg-white border-l border-gray-200\">\n          <UserList \n            users={onlineUsers}\n            currentUser={username}\n            onSendPrivateMessage={handleSendPrivateMessage}\n          />\n        </div>\n      )}\n\n      {/* Unread Count Badge */}\n      {unreadCount > 0 && (\n        <div className=\"fixed top-4 right-4 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold\">\n          {unreadCount > 99 ? '99+' : unreadCount}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1378, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Chat/ConnectionStatus.tsx"],"sourcesContent":["'use client'\n\ninterface ConnectionStatusProps {\n  isConnected: boolean\n}\n\nexport default function ConnectionStatus({ isConnected }: ConnectionStatusProps) {\n  if (isConnected) {\n    return (\n      <div className=\"bg-green-500 text-white text-center py-1 text-sm\">\n        <span className=\"inline-flex items-center\">\n          <span className=\"w-2 h-2 bg-white rounded-full mr-2 animate-pulse\"></span>\n          Connected\n        </span>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"bg-red-500 text-white text-center py-1 text-sm\">\n      <span className=\"inline-flex items-center\">\n        <span className=\"w-2 h-2 bg-white rounded-full mr-2\"></span>\n        Disconnected\n      </span>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AAAA;;AAMe,SAAS,iBAAiB,EAAE,WAAW,EAAyB;IAC7E,IAAI,aAAa;QACf,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAK,WAAU;;kCACd,6LAAC;wBAAK,WAAU;;;;;;oBAA0D;;;;;;;;;;;;IAKlF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAK,WAAU;;8BACd,6LAAC;oBAAK,WAAU;;;;;;gBAA4C;;;;;;;;;;;;AAKpE;KApBwB","debugId":null}},
    {"offset": {"line": 1448, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/chat/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport useSocket from '@/hooks/useSocket'\nimport ChatWindow from '@/components/Chat/ChatWindow'\nimport ConnectionStatus from '@/components/Chat/ConnectionStatus'\n\nexport default function ChatPage() {\n  const [username, setUsername] = useState('')\n  const [isLoading, setIsLoading] = useState(true)\n  const { socket, isConnected, connectionError, reconnect } = useSocket()\n  const router = useRouter()\n\n  useEffect(() => {\n    // Get username from localStorage\n    const storedUsername = localStorage.getItem('chatUsername')\n    if (!storedUsername) {\n      router.push('/')\n      return\n    }\n    \n    setUsername(storedUsername)\n    setIsLoading(false)\n  }, [router])\n\n  useEffect(() => {\n    // Join the chat when socket connects and username is available\n    if (socket && isConnected && username) {\n      socket.emit('join', { username, room: 'global' })\n    }\n  }, [socket, isConnected, username])\n\n  const handleLeaveChat = () => {\n    localStorage.removeItem('chatUsername')\n    if (socket) {\n      socket.disconnect()\n    }\n    router.push('/')\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading chat...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (connectionError) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-lg shadow-lg p-6 max-w-md w-full text-center\">\n          <div className=\"text-red-500 text-5xl mb-4\">‚ö†Ô∏è</div>\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Connection Error</h2>\n          <p className=\"text-gray-600 mb-4\">{connectionError}</p>\n          <div className=\"space-y-2\">\n            <button\n              onClick={reconnect}\n              className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              Try Again\n            </button>\n            <button\n              onClick={handleLeaveChat}\n              className=\"w-full bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors\"\n            >\n              Go Back\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!socket || !isConnected) {\n    return (\n      <div className=\"min-h-screen bg-gray-100\">\n        <ConnectionStatus isConnected={false} />\n        <div className=\"flex items-center justify-center h-full\">\n          <div className=\"text-center\">\n            <div className=\"animate-pulse text-4xl mb-4\">üîÑ</div>\n            <p className=\"text-gray-600\">Connecting to chat server...</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <ConnectionStatus isConnected={isConnected} />\n      <ChatWindow \n        username={username} \n        socket={socket} \n        onLeaveChat={handleLeaveChat}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,UAAS,AAAD;IACpE,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,iCAAiC;YACjC,MAAM,iBAAiB,aAAa,OAAO,CAAC;YAC5C,IAAI,CAAC,gBAAgB;gBACnB,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,YAAY;YACZ,aAAa;QACf;6BAAG;QAAC;KAAO;IAEX,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,+DAA+D;YAC/D,IAAI,UAAU,eAAe,UAAU;gBACrC,OAAO,IAAI,CAAC,QAAQ;oBAAE;oBAAU,MAAM;gBAAS;YACjD;QACF;6BAAG;QAAC;QAAQ;QAAa;KAAS;IAElC,MAAM,kBAAkB;QACtB,aAAa,UAAU,CAAC;QACxB,IAAI,QAAQ;YACV,OAAO,UAAU;QACnB;QACA,OAAO,IAAI,CAAC;IACd;IAEA,IAAI,WAAW;QACb,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;IAIrC;IAEA,IAAI,iBAAiB;QACnB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCAA6B;;;;;;kCAC5C,6LAAC;wBAAG,WAAU;kCAA2C;;;;;;kCACzD,6LAAC;wBAAE,WAAU;kCAAsB;;;;;;kCACnC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;0CAGD,6LAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;IAOX;IAEA,IAAI,CAAC,UAAU,CAAC,aAAa;QAC3B,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC,iJAAA,CAAA,UAAgB;oBAAC,aAAa;;;;;;8BAC/B,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CAA8B;;;;;;0CAC7C,6LAAC;gCAAE,WAAU;0CAAgB;;;;;;;;;;;;;;;;;;;;;;;IAKvC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,iJAAA,CAAA,UAAgB;gBAAC,aAAa;;;;;;0BAC/B,6LAAC,2IAAA,CAAA,UAAU;gBACT,UAAU;gBACV,QAAQ;gBACR,aAAa;;;;;;;;;;;;AAIrB;GA9FwB;;QAGsC,4HAAA,CAAA,UAAS;QACtD,qIAAA,CAAA,YAAS;;;KAJF","debugId":null}}]
}